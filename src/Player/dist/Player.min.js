!function(e){var t={};function r(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(i,l,function(t){return e[t]}.bind(null,l));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}({7:function(e,t,r){"use strict";var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();var l={},n=/player-lrc-mode-[0-9]+/g,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=document.querySelector(t);r&&(this.lrcData=null,this.lrcKeys=null,this.lrcLen=0,this.showLrcLines=7,this.__define__("xhr",{value:new XMLHttpRequest}),this.__define__("timer",{writable:!0,value:0}),this.__dom__(),this.__obs__(),r.appendChild(this[0]),this.__events__(),this.volume=.5,this.__define__("private",{value:1}))}return i(e,[{key:"__dom__",value:function(){e.__check__(this.private,"__dom__"),this[0]=document.createElement("div"),this[0].className="player player-1",this[0].innerHTML='\n        <video data-name="video" class="player-video"></video>\n        <div data-name="lrc" class="player-lrc"></div>\n        <div data-name="ctrls" class="player-controls">\n            <div class="player-slider" title="播放时间滑块">\n                <div data-name="buf" class="player-slider-buf"></div>\n                <div data-name="thumb" class="player-slider-thumb"></div>\n            </div>\n            <div class="player-toolbar">\n                <div class="player-toolbar-left">\n                    <div data-name="btn" class="player-btn" title="播放/暂时"></div>\n                    <div data-name="cur" class="player-current-time">--:--</div>\n                    <div data-name="dur" class="player-duration">/ --:--</div>\n                </div>\n                <div class="player-toolbar-right">\n                    <div data-name="vbtn" class="player-vol-btn" title="音量">\n                        <i class="player-vol-rect"></i>\n                        <i class="player-vol-tri"></i>\n                        <i class="player-vol-stat">\n                            <i class="player-vol-dot1"></i>\n                            <i class="player-vol-dot2"></i>\n                            <i class="player-vol-dot3"></i>\n                            <i class="player-vol-mute">&times;</i>\n                        </i>\n                        <div class="player-vol-slidebar">\n                            <div class="player-vol-slide-track">\n                                <div data-name="vslider" class="player-vol-slider"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div data-name="rate" class="player-rate" title="播放速率">1x</div>\n                    <div data-name="fscreen" class="player-fullscreen" title="全屏切换">\n                        <i class="player-fullscreen-tl"></i>\n                        <i class="player-fullscreen-tr"></i>\n                        <i class="player-fullscreen-bl"></i>\n                        <i class="player-fullscreen-br"></i>\n                    </div>\n                </div>\n            </div>\n        </div>',this.els={loading:document.createElement("div")},this.els.loading.className="r-loading";for(var t=this[0].querySelectorAll("[data-name]"),r=t.length,i=0;i<r;i++)this.els[t[i].getAttribute("data-name")]=t[i],t[i].removeAttribute("data-name")}},{key:"__define__",value:function(t,r){e.__check__(this.private,"__define__"),Object.defineProperty(this,t,r)}},{key:"__ob__",value:function(t,r){e.__check__(this.private,"__ob__");var i=void 0;this.__define__(t,{set:function(e){e!==i&&(i=e,r(e))},get:function(){return i}})}},{key:"__obs__",value:function(){e.__check__(this.private,"__obs__");var t=this;t.__ob__("src",function(e){t.lrc="",t.lrcData=null,t.lrcKeys=null,t.lrcLen=0,t.poster="",t.els.video.src=e}),t.__ob__("poster",function(e){e?t.els.video.poster=e:t.els.video.removeAttribute("poster")}),t.__ob__("currentTime",function(e){t.els.cur.innerText=l.timemat(e),t.els.thumb.style.width=e/t.duration*100+"%",t.getLrcActive(e)}),t.__ob__("volume",function(e){t.els.video.volume=e,t.els.vslider.style.height=100*e+"%"}),t.__ob__("activeIndex",function(){t.renderLrc()})}},{key:"__events__",value:function(){e.__check__(this.private,"__events__");var t=this,r=t.els.video,i=t.els.btn,n=t.els.loading;l.addEvent(window,"resize",function(){t.setLrcMode()}),l.addEvent(r,"loadstart",function(){t[0].appendChild(n)}),l.addEvent(r,"durationchange",function(){t.duration=this.duration,t.currentTime=0,t.els.dur.innerText="/ "+l.timemat(this.duration),t.els.video.playbackRate=parseFloat(t.els.rate.innerText),t.loadLrc()}),l.addEvent(r,"loadeddata",function(){t[0].removeChild(n)}),l.addEvent(r,"error",function(){n.innerHTML="加载失败",l.addClass(n,"r-loadend"),l.removeClass(n,"r-loading")}),l.addEvent(i,"click",function(){r.paused?(r.play(),r.autoplay=!0,l.addClass(i,"player-btn-playing")):(r.pause(),r.autoplay=!1,l.removeClass(i,"player-btn-playing"))}),l.addEvent(r,"timeupdate",function(){try{t.els.buf.style.width=r.buffered.end(r.buffered.length-1)/this.duration*100+"%"}catch(e){}t.currentTime=this.currentTime}),l.addEvent(t.els.thumb.parentNode,"click",function(e){if(r.duration>0){var i=e.offsetX/this.offsetWidth;t.currentTime=i*r.duration,r.currentTime=Math.round(i*r.duration)}}),l.addEvent(t.els.vslider.parentNode,"click",function(e){var r=this.getBoundingClientRect();t.volume=(r.bottom-e.clientY)/r.height}),l.addEvent(t.els.vbtn,"click",function(e){t.els.vslider.parentNode.parentNode.contains(e.target)||((r.muted=!r.muted)?l.addClass(t[0],"player-muted"):l.removeClass(t[0],"player-muted"))},!0),l.addEvent(t.els.rate,"click",function(){var e=parseFloat(this.innerText);(e+=.25)>2&&(e=.25),t.els.video.playbackRate=e,this.innerText=e+"x"}),l.addEvent(t.els.fscreen,"click",function(){l.isFullscreen()?(l.exitFullscreen(),l.removeClass(t.els.fscreen,"player-fullscreen-on")):(l.fullscreen(t[0]),l.addClass(t.els.fscreen,"player-fullscreen-on"))}),l.addEvent(t[0],"mousemove",function(e){t.timer&&clearTimeout(t.timer),t.els.ctrls.contains(e.target)||(t.showMouse(),t.timer=setTimeout(function(){t.hideMouse()},2e3))}),l.addEvent(t[0],"mouseleave",function(){t.hideMouse()})}},{key:"showMouse",value:function(){clearTimeout(this.timer),this[0].style.cursor="default",l.addClass(this.els.ctrls,"player-controls-show")}},{key:"hideMouse",value:function(){clearTimeout(this.timer),this[0].style.cursor="none",l.removeClass(this.els.ctrls,"player-controls-show")}},{key:"loadLrc",value:function(){var e=this;e.els.lrc.innerHTML="",this.lrc&&(this.xhr.open("get",this.lrc,!0),e.xhr.onreadystatechange=function(){if(4===e.xhr.readyState){var t="[00:00.00]找不到歌词/字幕";200===e.xhr.status&&(t=e.xhr.responseText),e.readLrc(t),e.showLrc(),e.setLrcMode()}},e.xhr.send())}},{key:"readLrc",value:function(e){var t=this,r=void 0;e&&(r=e.split(/\n+/),t.lrcData={},r.forEach(function(e){e.replace(/\[([0-9:.\[\]]+)\]/gi,function(r,i){if(r=e.slice(e.lastIndexOf("]")+1).replace(/\s+/g,""))for(var n=i.split(/\]\s*\[/),s=n.length,a=0;a<s;a++){var c=l.time(n[a]);t.lrcData[c]?t.lrcData[c]+="<br>"+r:t.lrcData[c]=r}})}),e=null,r=null,t.lrcKeys=Object.keys(t.lrcData),t.lrcKeys.sort(function(e,t){return Number(e)-Number(t)}),t.lrcLen=t.lrcKeys.length,t.activeIndex=0)}},{key:"getLrcActive",value:function(e){for(var t=0;t<this.lrcLen;t++){if(parseFloat(this.lrcKeys[t])-e>=0){this.lrcKeys[t-1]&&(this.activeIndex=t-1);break}}}},{key:"showLrc",value:function(){l.addClass(this.els.lrc,"player-lrc-show")}},{key:"hideLrc",value:function(){l.removeClass(this.els.lrc,"player-lrc-show")}},{key:"renderLrc",value:function(){if(1===this.lrcMode){this.els.lrc.innerHTML="";for(var e=this.showLrcLines,t=Math.floor(e/2),r=Math.round(100/(t+1)),i=0,l=0,n=r;i<e;i++)(l=this.activeIndex+i-t)<=this.activeIndex?n+=r:n-=r,this.lrcKeys[l]&&(this.els.lrc.innerHTML+='<div class="player-lrc-line'+(l===this.activeIndex?" player-lrc-line-active":"")+'" style="opacity: '+(n-r)/100+';">'+this.lrcData[this.lrcKeys[l]]+"</div>")}else this.els.lrc.innerHTML='<div class="player-lrc-line player-lrc-line-active">'+this.lrcData[this.lrcKeys[this.activeIndex]]+"</div>"}},{key:"setLrcMode",value:function(e){"number"==typeof e&&(this.lrcMode=e),this.lrcKeys&&this.renderLrc(),n.test(this.els.lrc.className)?this.els.lrc.className=this.els.lrc.className.replace(n,"player-lrc-mode-"+(this.lrcMode||0)):this.els.lrc.className+=" player-lrc-mode-"+(this.lrcMode||0);var t=this.els.lrc.children[0],r=32,i=void 0;t&&(r=t.offsetHeight+(Number(l.calced(t,"lineHeight"))||0)),i=1===this.lrcMode?(this[0].offsetHeight-r*this.showLrcLines)/2:this[0].offsetHeight-2*r,l.setTransformY(this.els.lrc,i,!0)}},{key:"setLrcLines",value:function(e){"number"==typeof e&&(this.showLrcLines=e,1===this.lrcMode&&this.setLrcMode())}}],[{key:"__check__",value:function(e,t){if(1===e)throw TypeError(t+"是私有方法，不可调用")}},{key:"toString",value:function(){return"{ [ class Player ] }"}}]),e}();window.Player=s}});